(function(){"use strict";var t={4354:function(t,i,e){var s=e(6775),h=e.n(s),o=e(5130),a=e(6768);const r={id:"app",style:{"'width":"100vw"}};function l(t,i,e,s,h,o){return(0,a.uX)(),(0,a.CE)("div",r,i[0]||(i[0]=[(0,a.Lk)("div",{id:"game-container"},null,-1)]))}var n={name:"App"},d=e(1241);const c=(0,d.A)(n,[["render",l]]);var g=c,u=e(1114);e(4114),e(8992),e(3949);const w=40,p={name:"default 1",groundHeight:w,platforms:[{x:1118,y:440,width:200,height:w,color:2263842},{x:400,y:440,width:100,height:w,color:2263842},{x:854,y:440,width:250,height:w,color:2263842}],height:500,width:1200,ballSpawn:{x:100,y:400},goal:{walls:{width:5,height:40},base:{width:40},position:{x:1e3,y:440}}},m=40,y={name:"default 2",groundHeight:m,platforms:[{x:1e3,y:440,width:200,height:m,color:2263842},{x:1045,y:400,width:50,height:m,color:2263842},{x:955,y:400,width:50,height:m,color:2263842}],width:1200,height:500,ballSpawn:{x:100,y:400},goal:{walls:{width:5,height:40},base:{width:40},position:{x:1e3,y:400}}},x=40,f={name:"default 3",groundHeight:x,platforms:[{x:1e3,y:390,width:170,height:x,color:2263842},{x:1072,y:350,width:100,height:x,color:2263842},{x:932,y:350,width:100,height:x,color:2263842}],width:1200,height:500,ballSpawn:{x:100,y:400},goal:{walls:{width:5,height:40},base:{width:40},position:{x:1e3,y:350}}},b=40,v={name:"default 4",groundHeight:b,platforms:[{x:550,y:0,width:b,height:1400,color:2263842},{x:550,y:900,width:b,height:250,color:2263842},{x:950,y:0,width:b,height:1200,color:2263842},{x:950,y:900,width:b,height:400,color:2263842},{x:1350,y:0,width:b,height:1300,color:2263842},{x:1350,y:900,width:b,height:300,color:2263842},{x:2345,y:940,width:150,height:b,color:2263842},{x:2155,y:940,width:150,height:b,color:2263842}],width:2400,height:1e3,ballSpawn:{x:100,y:900},goal:{walls:{width:5,height:40},base:{width:40},position:{x:2250,y:940}}},A=40,G={name:"default 5",groundHeight:A,platforms:[{x:0,y:240,width:900,height:A,color:2263842},{x:90,y:200,width:100,height:A,color:2263842},{x:430,y:60,width:A,height:200,color:2263842},{x:430,y:420,width:A,height:200,color:2263842}],width:1200,height:500,ballSpawn:{x:100,y:400},goal:{walls:{width:5,height:40},base:{width:40},position:{x:22,y:200}}},k=40,C={name:"default 6",groundHeight:k,platforms:[{x:100,y:100,width:100,height:k,color:2263842},{x:215,y:100,width:50,height:k,color:2263842},{x:530,y:250,width:1e3,height:k,color:2263842},{x:980,y:70,width:k,height:200,color:2263842},{x:350,y:450,width:k,height:200,color:2263842},{x:600,y:500,width:k,height:200,color:2263842},{x:850,y:420,width:k,height:200,color:2263842},{x:750,y:155,width:k,height:150,color:2263842},{x:450,y:200,width:k,height:100,color:2263842},{x:50,y:155,width:k,height:150,color:2263842},{x:250,y:155,width:k,height:150,color:2263842}],width:1200,height:500,ballSpawn:{x:100,y:400},goal:{walls:{width:5,height:40},base:{width:40},position:{x:170,y:100}}},S=40,O={name:"default 7",groundHeight:S,platforms:[{x:2140,y:750,width:75,height:S,color:2263842},{x:2122,y:695,width:S,height:150,color:2263842},{x:2320,y:750,width:200,height:S,color:2263842},{x:2202,y:600,width:200,height:S,color:2263842},{x:2202,y:450,width:500,height:S,color:2263842},{x:1972,y:640,width:S,height:400,color:2263842},{x:1800,y:660,width:S,height:600,color:2263842},{x:1450,y:380,width:700,height:S,color:2263842},{x:900,y:500,width:S,height:300,color:2263842},{x:1180,y:670,width:600,height:S,color:2263842},{x:400,y:820,width:S,height:300,color:2263842}],width:2400,height:1e3,ballSpawn:{x:100,y:900},goal:{walls:{width:5,height:40},base:{width:40},position:{x:2200,y:750}}},B=40,L={name:"default 7",groundHeight:B,platforms:[{x:600,y:305,width:B,height:450,color:2263842},{x:300,y:420,width:B,height:100,color:2263842},{x:440,y:100,width:350,height:B,color:2263842},{x:150,y:250,width:500,height:B,color:2263842},{x:900,y:360,width:B,height:200,color:2263842},{x:900,y:140,width:B,height:100,color:2263842},{x:1060,y:110,width:350,height:B,color:2263842},{x:960,y:300,width:150,height:B,color:2263842},{x:1180,y:300,width:150,height:B,color:2263842},{x:920,y:440,width:25,height:B,color:2263842},{x:995,y:440,width:50,height:B,color:2263842}],width:1200,height:500,ballSpawn:{x:100,y:400},goal:{walls:{width:5,height:40},base:{width:40},position:{x:950,y:440}}},T=40,M={name:"default 4",groundHeight:T,platforms:[{x:1e3,y:390,width:170,height:T,color:2263842},{x:1072,y:350,width:100,height:T,color:2263842},{x:932,y:350,width:100,height:T,color:2263842},{x:1400,y:650,width:700,height:T,color:2263842}],width:2400,height:1e3,ballSpawn:{x:100,y:400},goal:{walls:{width:5,height:40},base:{width:40},position:{x:1e3,y:350}}},P=40,j=!1,D=[p,y,f,v,G,C,O,L,M];class E extends h().Scene{constructor(){super({key:"GameScene"}),(0,u.A)(this,"ball",void 0),(0,u.A)(this,"isAiming",!1),(0,u.A)(this,"trajectoryGraphics",void 0),(0,u.A)(this,"miniMapBackground",void 0),(0,u.A)(this,"platforms",void 0),(0,u.A)(this,"goal",void 0),(0,u.A)(this,"goalArea",void 0),(0,u.A)(this,"goalTimer",void 0),(0,u.A)(this,"powerBar",void 0),(0,u.A)(this,"powerText",void 0),(0,u.A)(this,"lastAimX",0),(0,u.A)(this,"lastAimY",0),(0,u.A)(this,"startAimX",0),(0,u.A)(this,"startAimY",0),(0,u.A)(this,"ballOnGround",!1),(0,u.A)(this,"groundDrag",200),(0,u.A)(this,"airDrag",10),(0,u.A)(this,"bounceDrag",500),(0,u.A)(this,"powerMultiplier",1.8),(0,u.A)(this,"maxPower",1e3),(0,u.A)(this,"strokeCount",0),(0,u.A)(this,"strokeText",void 0),(0,u.A)(this,"gameObjectsGroup",void 0),(0,u.A)(this,"uiElementsGroup",void 0),(0,u.A)(this,"currentLevelIndex",0),(0,u.A)(this,"currentLevel",void 0),(0,u.A)(this,"handlePointerUpOutside",(()=>{this.isAiming&&(this.shootBall(),this.isAiming=!1)})),(0,u.A)(this,"handlePointerMoveOutside",(t=>{this.isAiming&&this.input.mouse.locked&&(this.lastAimX+=t.movementX,this.lastAimY+=t.movementY,this.updateTrajectory())}))}preload(){}init(t){this.currentLevelIndex=t.levelIndex??0}create(){const{width:t,height:i}=this.scale;this.physics.world.gravity.y=500,this.gameObjectsGroup=this.add.group(),this.uiElementsGroup=this.add.group(),this.platforms=this.physics.add.staticGroup(),this.events.on("loadNextLevel",(()=>{this.loadLevel(this.currentLevelIndex)})),this.cameras.main.setBackgroundColor("#87CEEB"),this.cameras.add(0,0,t,i,!1,"ui"),this.trajectoryGraphics=this.add.graphics(),this.gameObjectsGroup.add(this.trajectoryGraphics),this.createPowerBar(),this.createStrokeText(t),0===this.currentLevelIndex&&this.loadLevel(this.currentLevelIndex),this.cameras.main.ignore(this.uiElementsGroup.getChildren());const e=this.cameras.getCamera("ui"),s=this.cameras.getCamera("mini-map");e&&e.ignore(this.gameObjectsGroup.getChildren()),s&&s.ignore(this.uiElementsGroup.getChildren()),this.input.on("pointerdown",this.startAiming,this),document.addEventListener("pointermove",this.handlePointerMoveOutside),document.addEventListener("mouseup",this.handlePointerUpOutside),this.game.events.on("blur",(()=>{this.isAiming=!1})),this.game.events.on("focus",(()=>{this.isAiming=!1})),this.input.on("wheel",((t,i,e,s,o)=>{const a=s>0?-.1:.1,r=h().Math.Clamp(this.cameras.main.zoom+a,.5,2);this.cameras.main.zoom=r}))}loadLevel(t){if(this.platforms&&this.platforms.clear(!0,!0),this.goal&&this.goal.destroy(),this.ball&&this.ball.destroy(),this.currentLevel=D[t],!this.currentLevel)return;this.physics.world.setBounds(0,0,this.currentLevel.width,this.currentLevel.height),this.cameras.main.setBounds(0,0,this.currentLevel.width,this.currentLevel.height),this.currentLevel.platforms.push({x:this.currentLevel.width/2,y:this.currentLevel.height-P/2,width:this.currentLevel.width,height:P,color:2263842}),this.createWorldData(this.currentLevel.platforms),this.createGoal(this.currentLevel.goal),this.createMiniMap();const i=this.cameras.getCamera("ui"),e=this.cameras.getCamera("mini-map");i&&i.ignore(this.gameObjectsGroup.getChildren()),e&&e.ignore(this.uiElementsGroup.getChildren())}createMiniMap(){const t=this.cameras.getCamera("mini-map");t&&(this.cameras.remove(t),this.miniMapBackground.destroy());const i=120,e=50,s=this.physics.world.bounds.width,h=this.physics.world.bounds.height,o=i/s,a=e/h,r=Math.min(o,a),l=10,n=10;this.miniMapBackground=this.add.graphics(),this.miniMapBackground.lineStyle(10,16711680,1),this.miniMapBackground.strokeRect(l-1,n-1,i/r-15,e/r-1),this.miniMapBackground.setDepth(-1);const d=this.cameras.add(l,n,i,e,!1,"mini-map").setZoom(r);d.setBounds(0,0,s,h),d.startFollow(this.ball),this.cameras.main.ignore(this.miniMapBackground);const c=this.cameras.getCamera("ui");c&&c.ignore(this.miniMapBackground)}createWorldData(t){t.forEach((({x:t,y:i,width:e,height:s,color:h},o)=>{const a=this.add.rectangle(t,i,e,s,h);this.platforms.add(a),this.physics.add.existing(a,!0)})),this.platforms.getChildren().forEach((t=>{this.physics.add.existing(t,!0),this.gameObjectsGroup.add(t)})),this.createBall(this.currentLevel.ballSpawn.x,this.currentLevel.ballSpawn.y)}createStrokeText(t){this.strokeText=this.add.text(t-20,20,"Strokes: 0",{font:"18px Arial",color:"#ffffff",backgroundColor:"#000000",padding:{x:5,y:5}}).setOrigin(1,0),this.uiElementsGroup.add(this.strokeText)}createBall(t,i){const e=10,s=this.add.graphics();s.fillStyle(16729344,1),s.fillCircle(e,e,e),s.generateTexture("ballTexture",2*e,2*e),s.destroy(),this.ball=this.physics.add.image(t,i,"ballTexture"),this.ball.setCircle(e),this.ball.setOrigin(.5,.5),this.ball.setBounce(.4),this.ball.setCollideWorldBounds(!0),this.ball.setDrag(10);const h=this.ball.body;h.setGravityY(500),h.setMass(1.2),this.physics.add.collider(this.ball,this.platforms,(()=>{this.ballOnGround=!0})),this.events.on("preupdate",(()=>{h&&(this.ballOnGround=h.blocked?.down||h.touching?.down)})),this.cameras.main.startFollow(this.ball),this.gameObjectsGroup.add(this.ball)}createGoal(t){const i=this.add.rectangle(t.position.x-t.base.width/2,t.position.y,t.walls.width,t.walls.height,16766720);this.physics.add.existing(i,!0),this.platforms.add(i),this.gameObjectsGroup.add(i);const e=this.add.rectangle(t.position.x+t.base.width/2,t.position.y,t.walls.width,t.walls.height,16766720);this.physics.add.existing(e,!0),this.platforms.add(e),this.gameObjectsGroup.add(e);const s=this.add.rectangle(t.position.x,t.position.y+t.walls.height/2-t.walls.width/2,t.base.width,t.walls.width,16766720);if(this.physics.add.existing(s,!0),this.platforms.add(s),this.gameObjectsGroup.add(s),this.goal=this.physics.add.image(t.position.x,t.position.y+t.walls.height/4,"goalSensor"),this.goal.setDisplaySize(t.base.width-10,t.walls.height/2),this.goal.setVisible(!1),this.goal.body.setAllowGravity(!1),this.goal.body.setImmovable(!0),this.goalArea=new(h().Geom.Rectangle)(t.position.x-t.base.width/2,t.position.y-.25*t.walls.height,t.base.width,.75*t.walls.height),j){const t=this.add.graphics();t.fillStyle(65280,.3),t.fillRectShape(this.goalArea)}this.physics.add.overlap(this.ball,this.goal,this.startGoalStayTimer,void 0,this)}startGoalStayTimer(){this.goalTimer||(this.goalTimer=this.time.delayedCall(700,(()=>{this.winGame()})))}startAiming(){if(!this.ball||!this.ball.body||!this.input.mouse)return;const t=this.ball.body,i=0===Math.abs(t.velocity.x);i&&this.ballOnGround&&(this.input.mouse.locked||this.input.mouse.requestPointerLock(),this.isAiming=!0,this.startAimX=this.ball.x,this.startAimY=this.ball.y,this.lastAimX=this.startAimX,this.lastAimY=this.startAimY,this.input.setDefaultCursor("none"))}getPointerPosition(t){return{x:t.clientX-this.game.canvas.getBoundingClientRect().left,y:t.clientY-this.game.canvas.getBoundingClientRect().top}}createPowerBar(){const{width:t}=this.scale,i=200;this.powerBar=this.add.graphics(),this.powerText=this.add.text(t-i-15,70,"Power: 0%",{font:"16px Arial",color:"#000000"}).setOrigin(0,.5),this.drawPowerBar(0),this.uiElementsGroup.add(this.powerBar),this.uiElementsGroup.add(this.powerText)}drawPowerBar(t){const{width:i}=this.scale,e=200,s=20,h=t/this.maxPower*e;this.powerBar.clear();let o=65280;t>.75*this.maxPower?o=16711680:t>.5*this.maxPower?o=16753920:t>.25*this.maxPower&&(o=16776960),this.powerBar.fillStyle(0,1),this.powerBar.fillRect(i-e-20,60,e,s),this.powerBar.fillStyle(o,1),this.powerBar.fillRect(i-e-20,60,h,s);const a=Math.round(t/this.maxPower*100);this.powerText.setText(`Power: ${a}%`),this.powerText.setPosition(i-e-15,70)}updateTrajectory(){if(this.isAiming){this.trajectoryGraphics.clear();const t=this.calculateAngle(),i=this.calculatePower();this.drawTrajectory(t,i),this.drawPowerBar(i)}}drawTrajectory(t,i){this.trajectoryGraphics.clear();const e=5,s=Math.max(i,e),h=this.ball.x,o=this.ball.y,a=Math.max(5,i/10),r=Math.cos(t),l=Math.sin(t),n=3;for(let d=0;d<=s;d+=a){const t=h+r*d/n,i=o+l*d/n;this.trajectoryGraphics.fillStyle(16729344,1),this.trajectoryGraphics.fillCircle(t,i,2)}}calculateAngle(){const t=h().Math.Angle.Between(this.ball.x,this.ball.y,this.lastAimX,this.lastAimY),i=t+Math.PI;return i}calculatePower(){const t=h().Math.Clamp(h().Math.Distance.Between(this.ball.x,this.ball.y,this.lastAimX,this.lastAimY)*this.powerMultiplier,0,this.maxPower);return t}updateStrokeText(){this.strokeText.setText(`Strokes: ${this.strokeCount}`)}shootBall(){if(this.isAiming){const t=this.calculateAngle(),i=this.calculatePower();this.ball.setVelocity(i*Math.cos(t),i*Math.sin(t)),this.trajectoryGraphics.clear(),this.drawPowerBar(0),this.powerText.setText("Power: 0%"),this.isAiming=!1,0!==this.ball.body.velocity.x&&0!==this.ball.body.velocity.y&&(this.strokeCount++,this.updateStrokeText()),this.input.mouse.locked&&this.input.mouse.releasePointerLock(),this.input.setDefaultCursor("auto")}}update(){const t=this.ball.body,i=new(h().Geom.Point)(this.ball.x,this.ball.y);t&&(this.goalTimer&&!h().Geom.Rectangle.ContainsPoint(this.goalArea,i)&&(this.goalTimer.remove(!1),this.goalTimer=void 0),t.touching.down?Math.abs(t.velocity.y)>5?t.setDragX(this.bounceDrag):t.setDragX(this.groundDrag):t.setDrag(this.airDrag))}winGame(){this.ball.body.setVelocity(0,0),this.ball.body.setAllowGravity(!1);const{width:t,height:i}=this.scale,e=this.add.graphics();e.fillStyle(0,.7),e.fillRoundedRect(t/2-150,i/2-100,300,200,10);const s=this.add.text(t/2,i/2-50,"Congratulations!",{font:"24px Arial",color:"#ffffff"});s.setOrigin(.5);const h=this.add.text(t/2,i/2,`Strokes: ${this.strokeCount}`,{font:"20px Arial",color:"#ffff00"});h.setOrigin(.5);const o=this.add.text(t/2,i/2+60,"Next Level",{font:"20px Arial",color:"#ff4500",backgroundColor:"#ffffff",padding:{x:10,y:5}});o.setOrigin(.5),o.setInteractive(),o.on("pointerdown",(()=>{this.finishLevel(),e.destroy(),s.destroy(),h.destroy(),o.destroy()}));const a=this.cameras.getCamera("mini-map");this.cameras.main.ignore([e,s,h,o]),a&&a.ignore([e,s,h,o])}finishLevel(){this.strokeCount=0,this.currentLevelIndex++,this.updateStrokeText(),this.currentLevelIndex<D.length||(this.currentLevelIndex=0),this.loadLevel(this.currentLevelIndex)}}class I extends h().Scene{constructor(){super({key:"StartScene"})}preload(){this.load.image("background","assets/bg-title-screen.webp")}create(){const{width:t,height:i}=this.scale,e=this.add.image(0,0,"background").setOrigin(0,0);e.setDisplaySize(t,i),this.add.text(t/2,i/3,"Geilo Golf",{font:"68px Arial",color:"#000000"}).setOrigin(.5);const s=this.add.text(t/2,i/2,"Start Game",{font:"32px Arial",color:"#ff4500",backgroundColor:"#ffffff",padding:{x:20,y:10}}).setOrigin(.5);s.setInteractive(),s.on("pointerover",(()=>{s.setStyle({backgroundColor:"#ffcc00"})})),s.on("pointerout",(()=>{s.setStyle({backgroundColor:"#ffffff"})})),s.on("pointerdown",(()=>{this.scene.start("GameScene")}))}}const X={type:h().AUTO,width:1200,height:500,parent:"game-container",physics:{default:"arcade",arcade:{gravity:{x:0,y:500},debug:!1}},scene:[I,E]};new(h().Game)(X),(0,o.Ef)(g).mount("#app")}},i={};function e(s){var h=i[s];if(void 0!==h)return h.exports;var o=i[s]={exports:{}};return t[s].call(o.exports,o,o.exports,e),o.exports}e.m=t,function(){var t=[];e.O=function(i,s,h,o){if(!s){var a=1/0;for(d=0;d<t.length;d++){s=t[d][0],h=t[d][1],o=t[d][2];for(var r=!0,l=0;l<s.length;l++)(!1&o||a>=o)&&Object.keys(e.O).every((function(t){return e.O[t](s[l])}))?s.splice(l--,1):(r=!1,o<a&&(a=o));if(r){t.splice(d--,1);var n=h();void 0!==n&&(i=n)}}return i}o=o||0;for(var d=t.length;d>0&&t[d-1][2]>o;d--)t[d]=t[d-1];t[d]=[s,h,o]}}(),function(){e.n=function(t){var i=t&&t.__esModule?function(){return t["default"]}:function(){return t};return e.d(i,{a:i}),i}}(),function(){e.d=function(t,i){for(var s in i)e.o(i,s)&&!e.o(t,s)&&Object.defineProperty(t,s,{enumerable:!0,get:i[s]})}}(),function(){e.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){e.o=function(t,i){return Object.prototype.hasOwnProperty.call(t,i)}}(),function(){var t={524:0};e.O.j=function(i){return 0===t[i]};var i=function(i,s){var h,o,a=s[0],r=s[1],l=s[2],n=0;if(a.some((function(i){return 0!==t[i]}))){for(h in r)e.o(r,h)&&(e.m[h]=r[h]);if(l)var d=l(e)}for(i&&i(s);n<a.length;n++)o=a[n],e.o(t,o)&&t[o]&&t[o][0](),t[o]=0;return e.O(d)},s=self["webpackChunkgeilo_golf"]=self["webpackChunkgeilo_golf"]||[];s.forEach(i.bind(null,0)),s.push=i.bind(null,s.push.bind(s))}();var s=e.O(void 0,[504],(function(){return e(4354)}));s=e.O(s)})();
//# sourceMappingURL=app.1360c272.js.map